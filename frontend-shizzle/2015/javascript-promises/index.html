<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="theme-color" content="#22313f">

<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />




<title> Javascript Promises explained | remoblaser.ch</title>




<meta name="description" content="Ever wondered how promises in JavaScript work? Well, here&#39;s a easy explanation.">

<meta name="keywords" content="javascript, promise, es6, js">

<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css">






<link rel="canonical" href="http://blog.remoblaser.ch/frontend-shizzle/2015/javascript-promises/">
<link rel="alternate" type="application/rss+xml" title="remoblaser.ch" href="http://blog.remoblaser.ch/feed.xml" />

<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50142337-2', 'auto');
  ga('send', 'pageview');

</script>



  </head>
  <body class="single">

    <main class="main-container">

        <header class="site-header">

  <div class="container txt-center">
    <a href="#" class="nav-toogle js-menu-trigger sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </a>

    <nav class="js-menu sliding-panel-content">
      <ul>
        <li><a href="/">front</a></li>
        <li><a href="/about">about</a></li>
        <li><a href="/subscribe">subscribe</a></li>
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i> feed</a></li>
      </ul>
    </nav>
    <div class="js-menu-screen sliding-panel-fade-screen"></div>
 
    <a href="/" class="author-thumb dot">
      <img src="/images/author.jpg" alt="Author thumbnail" class="dot">
    </a>

    
      <h1 class="post-title">Javascript Promises explained</h1>
      <p class="post-meta">Dec 28, 2015</p>
    

  </div>

</header>


        <section class="main-content">
          <article class="post">

  <div class="post-content container">
    <p>A JavaScript promise basically is a eventual result of an <strong>asynchronous</strong> action, such as a simple function.
It works similar like the synchronous try/catch approach.
A promise can either be:</p>

<ul>
  <li><em>- Pending (outcome has not been defined yet)</em></li>
  <li><em>- Fulfilled (Action has successfully completed, Promise has a value)</em></li>
  <li><em>- Rejected (Action failed, the promise will never be fulfilled!, Promise has a reason why it failed)</em></li>
</ul>

<p><br />
Promises are always asynchronous and a promise can never change it’s state from fulfilled to rejected or vise-versa.
A pending promise can however transition into a fulfilled or a rejected promise.
The basic functionality of a promise are as simple as a promise we do in our everyday life:</p>

<ul>
  <li>A: Can you … ?</li>
  <li>B: Yes, i promise i will try to … !</li>
  <li>
    <p>A: Goes on (async)   <em>Promise state: pending</em></p>
  </li>
  <li>
    <p>… later on …</p>
  </li>
  <li>B: I’ve done … here’s …   <em>Promise state: fulfilled</em></li>
  <li><strong>OR</strong></li>
  <li>
    <p>B: I couldn’t do … because …   <em>Promise state: rejected</em></p>
  </li>
  <li>A: Continues on…</li>
</ul>

<p><br />
For a longer explanation and more details, the Mozilla Developer Network delivers a <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">great article</a> about promises. I’d rather would like to show you a simple example now.</p>

<h2 id="example">Example</h2>

<p>Alright, let’s dig into it. As you’ve may already discovered, AJAX requests are a perfect case to use promises.
They’re asynchronous, which means we can continue on while the request is pending and later on we can specifically take action if our request failed or succeeded.
Let’s consume a simple API with JavaScript. I’ve used <a href="http://jsonplaceholder.typicode.com/">JSONPlaceholder</a> to simply test out a promise.</p>

<p><br />
<em>View a <a href="/examples/javascript-promise/">working example here</a> or check out the <a href="https://gist.github.com/remoblaser/15ba8ec41c10df996e0d">source here</a></em></p>

<p><br />
First, let’s grab the API-Root from the JSONPlaceholder API. I’ve directly added <em>/posts/</em> since we’re only going to get 1 Post in this example:</p>

<div class="highlight"><pre><code class="language-javascript">    <span class="kd">var</span> <span class="nx">apiRoot</span> <span class="o">=</span> <span class="s1">&#39;http://jsonplaceholder.typicode.com/posts/&#39;</span><span class="p">;</span></code></pre></div>

<p>Alright, now lets make our promise and put it in a simple function called <em>getPost</em>:</p>

<div class="highlight"><pre><code class="language-javascript">    <span class="kd">function</span> <span class="nx">getPost</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="c1">//Create a new Promise</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="p">{</span>

            <span class="c1">//Create a simple JS XMLHttpRequest</span>
            <span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
            <span class="nx">req</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="nx">apiRoot</span> <span class="o">+</span> <span class="nx">id</span><span class="p">);</span>

            <span class="c1">//Once we send out the Request...</span>
            <span class="nx">req</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">//resolve the promise (promise will be fulfilled)</span>
                    <span class="nx">resolve</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="c1">//Argh, we got some error. Let&#39;s reject the promise</span>
                    <span class="nx">reject</span><span class="p">(</span><span class="nb">Error</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">statusText</span><span class="p">));</span>
                <span class="p">}</span>

            <span class="p">};</span>

            <span class="c1">//If we didn&#39;t get any response / we couldn&#39;t send out the request, we have a network error.</span>
            <span class="c1">//In this case, we will reject the promise aswell.</span>
            <span class="nx">req</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">reject</span><span class="p">(</span><span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Network Error&quot;</span><span class="p">));</span>
            <span class="p">};</span> 

            <span class="c1">//Send out the request</span>
            <span class="nx">req</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span></code></pre></div>

<p>That’s it! It’s that simple! Now we can finally use our Promise:</p>

<div class="highlight"><pre><code class="language-javascript">    <span class="nx">getPost</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Success!&quot;</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;Failed!&quot;</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span></code></pre></div>

<p>As you can see, we have the possibility to react if the AJAX Request was successful or not.
Additionally, everything is done asynchonous, which means, we could continue executing JS while our Promise is working.
In the <a href="/examples/javascript-promise/">example</a> i’ve added a bit more to it, make sure to check it out!</p>


    <aside class="share">

      <span>Share this: </span> 

      <a href="//twitter.com/share?text=Javascript Promises explained&amp;url=http://blog.remoblaser.ch/frontend-shizzle/2015/javascript-promises/&amp;via=remoblaser"
      onclick="ga('send', 'event', 'button', 'click', 'share');window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <i class="fa fa-twitter"></i>
      </a>

      <a href="//www.facebook.com/sharer/sharer.php?u=http://blog.remoblaser.ch/frontend-shizzle/2015/javascript-promises/"
      onclick="ga('send', 'event', 'button', 'click', 'share');window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <i class="fa fa-facebook"></i>
      </a>

      <a target="_blank" href="//de.pinterest.com/pin/create/button/" data-pin-do="buttonBookmark"  data-pin-color="red" data-pin-height="28">
        <i class="fa fa-pinterest"></i>
      </a>

    </aside>
  </div>

  
  <hr>

  <aside id="comments" class="disqus">

    <div class="container">
      <h3><i class="fa fa-comments-o"></i> Comments</h3>
      <div id="disqus_thread"></div>

      <script type="text/javascript">
         var disqus_shortname = 'remoblaser';
        
        var disqus_config = function () {
            this.page.url = 'http://blog.remoblaser.ch/frontend-shizzle/2015/javascript-promises';
            this.page.identifier = '/frontend-shizzle/2015/javascript-promises' + 'http://blog.remoblaser.ch';
            this.page.title = "Javascript Promises explained";
            this.callbacks.onNewComment = [function() { 
              ga('send', 'event', 'button', 'click', 'comment');
            }];
        };
        
        (function() { 
            var d = document, s = d.createElement('script');
            
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';  
            
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();

      </script>

      <noscript>
        Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
      </noscript>
    </div>

  </aside>

</article>


<div class="subscribe">
    <span class="close"><i class="fa fa-close"></i></span>
    <p>Like what you're reading? Subscribe now for a weekly list of new Posts directly into your mailbox. No spam, i promise!</p>

    <div id="mc_embed_signup">
        <form action="//remoblaser.us12.list-manage.com/subscribe/post?u=f1a5c7aaa441210086d3e9047&amp;id=d41fbaadee" 
            method="post" 
            id="mc-embedded-subscribe-form" 
            name="mc-embedded-subscribe-form" 
            class="validate" 
            target="_blank" 
            novalidate>
            <div id="mc_embed_signup_scroll">
    
                <div class="mc-field-group">
                    <input required placeholder="E-Mail" type="email" value="" name="EMAIL" class="required email inline" id="mce-EMAIL">
                </div>
                <div style="position: absolute; left: -5000px;" aria-hidden="true">
                    <input type="text" name="b_f1a5c7aaa441210086d3e9047_d41fbaadee" tabindex="-1" value="">
                </div>
                <div class="clear">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button inline" onclick="ga('send', 'event', 'button', 'click', 'add-subscriber-panel');">
                </div>
            </div>
        </form>
    </div> 
</div>

        </section>

        
<div class="clearfix"></div>

<footer class="site-footer txt-center">
  <hr>

  <ul class="social">
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://twitter.com/remoblaser" target="_blank"><i class="fa fa-twitter"></i></a></li>
      
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://github.com/remoblaser" target="_blank"><i class="fa fa-github"></i></a></li>
      
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://plus.google.com/+RemoBlaser" target="_blank"><i class="fa fa-google-plus"></i></a></li>
      
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://xing.com/profile/Remo_Blaser" target="_blank"><i class="fa fa-xing"></i></a></li>
      
    
  </ul>

  <small>&copy; 2016 All rights reserved. Made with <a href="http://jekyllrb.com" target="_blank">Jekyll</a> and <i class="fa fa-heart"></i>
  <br />
  <a href="/subscribe/">Subscribe to the newsletter</a>
  </small>

</footer>


    </main>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/jekyll-search.min.js"></script>
    <script src="/js/cookies.js"></script>
    <script src="/js/main.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="theme-color" content="#22313f">

<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />




<title> Introducing my easy to use Laravel search package | remoblaser.ch</title>




<meta name="description" content="In this Blogpost i&#39;m going to introduce to you my Laravel search package.">

<meta name="keywords" content="laravel, search, remoblaser, package">

<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css">






<link rel="canonical" href="http://blog.remoblaser.ch/laravel/2015/introducing-laravel-search/">
<link rel="alternate" type="application/rss+xml" title="remoblaser.ch" href="http://blog.remoblaser.ch/feed.xml" />

<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50142337-2', 'auto');
  ga('send', 'pageview');

</script>



  </head>
  <body class="single">

    <main class="main-container">

        <header class="site-header">

  <div class="container txt-center">
    <a href="#" class="nav-toogle js-menu-trigger sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </a>

    <nav class="js-menu sliding-panel-content">
      <ul>
        <li><a href="/">front</a></li>
        <li><a href="/about">about</a></li>
        <li><a href="/subscribe">subscribe</a></li>
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i> feed</a></li>
      </ul>
    </nav>
    <div class="js-menu-screen sliding-panel-fade-screen"></div>
 
    <a href="/" class="author-thumb dot">
      <img src="/images/author.jpg" alt="Author thumbnail" class="dot">
    </a>

    
      <h1 class="post-title">Introducing my easy to use Laravel search package</h1>
      <p class="post-meta">Dec 22, 2015</p>
    

  </div>

</header>


        <section class="main-content">
          <article class="post">

  <div class="post-content container">
    <p>A while ago i’ve created a <a href="https://github.com/remoblaser/laravel-search">Laravel search package</a> to easily search through your Eloquent Models / Database. I guess it’s time to show it off here and explain to you, how it works.</p>

<h2 id="install-it">Install it</h2>
<p>To install it, simply cd into your application and tell composer to add the package to your dependencies.</p>

<div class="highlight"><pre><code class="language-bash">    <span class="nv">$ </span>composer require remoblaser/search</code></pre></div>

<h2 id="add-it-to-laravel">Add it to Laravel</h2>

<p>Now let’s tell Laravel to use this package by adding it to your <em>providers</em> array in <em>“app/app.php”</em>.</p>

<div class="highlight"><pre><code class="language-php">    <span class="s1">&#39;providers&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="o">...</span>
        <span class="s1">&#39;Remoblaser\Search\SearchServiceProvider&#39;</span><span class="p">,</span>
    <span class="p">),</span></code></pre></div>

<p><br />
Additionally we want to register a Facade to easily access the functionality everywhere we want.
In <em>“app/config.php”</em> again, add the following line to your <em>aliases</em> array.</p>

<div class="highlight"><pre><code class="language-php">    <span class="s1">&#39;aliases&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="o">...</span>
        <span class="s1">&#39;Search&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Remoblaser\Search\Facades\Search&#39;</span>
    <span class="p">),</span></code></pre></div>
<p><br />
Alright, got em! To finish off everything, run the <em>“php artisan vendor:publish”</em> command to create a search configuration for your app. In there, we define which Eloquent Models we would like to search through.</p>

<h2 id="use-it">Use it</h2>
<p>Let’s imagine we have a Simple User Model. Actually let’s take the default Laravel User Model which looks like this:</p>

<table>
  <thead>
    <tr>
      <th>Column</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: right">Additional</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>name</td>
      <td style="text-align: center">string</td>
      <td style="text-align: right"> </td>
    </tr>
    <tr>
      <td>email</td>
      <td style="text-align: center">string</td>
      <td style="text-align: right">unique</td>
    </tr>
    <tr>
      <td>password</td>
      <td style="text-align: center">string</td>
      <td style="text-align: right"> </td>
    </tr>
  </tbody>
</table>

<p><br />
In a first step we’re going to enable a search on the User’s name.
First, tell the search to look in this specific Model.
In our published config file, add the Model and define a keyword for later use witht he Facade:</p>

<div class="highlight"><pre><code class="language-php">    <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;users&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;App\User&#39;</span><span class="p">,</span>
    <span class="p">);</span></code></pre></div>

<p><br />
Now let’s tell our Model to implement the <em>SearchableTrait</em> which actually adds the functionality to search through the Model.
Additionally we can specify a array called <em>“searchFields”</em> where we define, which columns we want to search through.
In our example, we only want to search for the “names” of the User. You’re however free to define as much columns as you want.</p>

<div class="highlight"><pre><code class="language-php">    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">namespace</span> <span class="nx">App\User</span><span class="p">;</span>

        <span class="k">use</span> <span class="nx">Remoblaser\Search\SearchableTrait</span><span class="p">;</span>

        <span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">\Eloquent</span> <span class="p">{</span>
            <span class="k">use</span> <span class="nx">SearchableTrait</span><span class="p">;</span>

            <span class="k">protected</span> <span class="nv">$searchFields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
        <span class="p">}</span></code></pre></div>

<p><br />
Thats it! Now we can finally search through the Users table from everywhere we want.
Just use the <em>Search</em> facade, followed by the keyword we defined in our config.
Or search through all Tables by simply using <em>“Search::all()”</em>.
As a parameter, we use the word we would like to search.</p>

<div class="highlight"><pre><code class="language-php">    <span class="nx">Search</span><span class="o">::</span><span class="na">users</span><span class="p">(</span><span class="s1">&#39;john&#39;</span><span class="p">);</span> <span class="c1">// Only search through the App\User table</span>
    <span class="nx">Search</span><span class="o">::</span><span class="na">all</span><span class="p">(</span><span class="s1">&#39;john&#39;</span><span class="p">);</span> <span class="c1">// Search through all the Tables defined in our config</span></code></pre></div>

<p><br />
Easy, right?</p>


    <aside class="share">

      <span>Share this: </span> 

      <a href="//twitter.com/share?text=Introducing my easy to use Laravel search package&amp;url=http://blog.remoblaser.ch/laravel/2015/introducing-laravel-search/&amp;via=remoblaser"
      onclick="ga('send', 'event', 'button', 'click', 'share');window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <i class="fa fa-twitter"></i>
      </a>

      <a href="//www.facebook.com/sharer/sharer.php?u=http://blog.remoblaser.ch/laravel/2015/introducing-laravel-search/"
      onclick="ga('send', 'event', 'button', 'click', 'share');window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <i class="fa fa-facebook"></i>
      </a>

      <a target="_blank" href="//de.pinterest.com/pin/create/button/" data-pin-do="buttonBookmark"  data-pin-color="red" data-pin-height="28">
        <i class="fa fa-pinterest"></i>
      </a>

    </aside>
  </div>

  
  <hr>

  <aside id="comments" class="disqus">

    <div class="container">
      <h3><i class="fa fa-comments-o"></i> Comments</h3>
      <div id="disqus_thread"></div>

      <script type="text/javascript">
         var disqus_shortname = 'remoblaser';
        
        var disqus_config = function () {
            this.page.url = 'http://blog.remoblaser.ch/laravel/2015/introducing-laravel-search';
            this.page.identifier = '/laravel/2015/introducing-laravel-search' + 'http://blog.remoblaser.ch';
            this.page.title = "Introducing my easy to use Laravel search package";
            this.callbacks.onNewComment = [function() { 
              ga('send', 'event', 'button', 'click', 'comment');
            }];
        };
        
        (function() { 
            var d = document, s = d.createElement('script');
            
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';  
            
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();

      </script>

      <noscript>
        Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
      </noscript>
    </div>

  </aside>

</article>


<div class="subscribe">
    <span class="close"><i class="fa fa-close"></i></span>
    <p>Like what you're reading? Subscribe now for a weekly list of new Posts directly into your mailbox. No spam, i promise!</p>

    <div id="mc_embed_signup">
        <form action="//remoblaser.us12.list-manage.com/subscribe/post?u=f1a5c7aaa441210086d3e9047&amp;id=d41fbaadee" 
            method="post" 
            id="mc-embedded-subscribe-form" 
            name="mc-embedded-subscribe-form" 
            class="validate" 
            target="_blank" 
            novalidate>
            <div id="mc_embed_signup_scroll">
    
                <div class="mc-field-group">
                    <input required placeholder="E-Mail" type="email" value="" name="EMAIL" class="required email inline" id="mce-EMAIL">
                </div>
                <div style="position: absolute; left: -5000px;" aria-hidden="true">
                    <input type="text" name="b_f1a5c7aaa441210086d3e9047_d41fbaadee" tabindex="-1" value="">
                </div>
                <div class="clear">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button inline" onclick="ga('send', 'event', 'button', 'click', 'add-subscriber-panel');">
                </div>
            </div>
        </form>
    </div> 
</div>

        </section>

        
<div class="clearfix"></div>

<footer class="site-footer txt-center">
  <hr>

  <ul class="social">
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://twitter.com/remoblaser" target="_blank"><i class="fa fa-twitter"></i></a></li>
      
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://github.com/remoblaser" target="_blank"><i class="fa fa-github"></i></a></li>
      
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://plus.google.com/+RemoBlaser" target="_blank"><i class="fa fa-google-plus"></i></a></li>
      
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://xing.com/profile/Remo_Blaser" target="_blank"><i class="fa fa-xing"></i></a></li>
      
    
  </ul>

  <small>&copy; 2016 All rights reserved. Made with <a href="http://jekyllrb.com" target="_blank">Jekyll</a> and <i class="fa fa-heart"></i>
  <br />
  <a href="/subscribe/">Subscribe to the newsletter</a>
  </small>

</footer>


    </main>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/jekyll-search.min.js"></script>
    <script src="/js/cookies.js"></script>
    <script src="/js/main.js"></script>
  </body>
</html>

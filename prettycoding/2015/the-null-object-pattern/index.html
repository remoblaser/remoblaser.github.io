<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="theme-color" content="#22313f">

<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16" />




<title> Making friends with null: The Null Object Pattern | remoblaser.ch</title>




<meta name="description" content="We always fight versus &#39;null&#39;, but instead, we could make it our friend with the Null Object Pattern.">

<meta name="keywords" content="null, object, pattern, php, refactoring, clean code">

<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/main.css">






<link rel="canonical" href="http://blog.remoblaser.ch/prettycoding/2015/the-null-object-pattern/">
<link rel="alternate" type="application/rss+xml" title="remoblaser.ch" href="http://blog.remoblaser.ch/feed.xml" />

<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50142337-2', 'auto');
  ga('send', 'pageview');

</script>



  </head>
  <body class="single">

    <main class="main-container">

        <header class="site-header">

  <div class="container txt-center">
    <a href="#" class="nav-toogle js-menu-trigger sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </a>

    <nav class="js-menu sliding-panel-content">
      <ul>
        <li><a href="/">front</a></li>
        <li><a href="/about">about</a></li>
        <li><a href="/subscribe">subscribe</a></li>
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i> feed</a></li>
      </ul>
    </nav>
    <div class="js-menu-screen sliding-panel-fade-screen"></div>
 
    <a href="/" class="author-thumb dot">
      <img src="/images/author.jpg" alt="Author thumbnail" class="dot">
    </a>

    
      <h1 class="post-title">Making friends with null: The Null Object Pattern</h1>
      <p class="post-meta">Dec 29, 2015</p>
    

  </div>

</header>


        <section class="main-content">
          <article class="post">

  <div class="post-content container">
    <p>If i would count the amount of times I’ve checked against null, I would probably still be counting in a year.<br />
If i would count the amount of times I forgot to check against null and my application returned an error, I could count forever.</p>

<p>There are some cases in our system, where we would like to apply a sort of functionality if it’s available or not, if nothing is given.</p>

<p>The Null Value Object is a good way to remove unnecessary checks against null if we have such a behaviour in our App.<br />
I’m going to show you a good example, taken from <a href="http://twitter.com/adamwathan">Adam Wathan</a>’s <a href="https://www.youtube.com/watch?v=5DVDewOReoY">Laracon Talk: “Chasing Perfect”</a>.<br />
If you’ve not already watched the talk, it’s definitely worth it, so save the link to your bookmarks!</p>

<p>Let’s imagine we have a simple Shop and some coupon codes, for example a ValueCoupon and a PercentCoupon. <br />
The ValueCoupon simply gives us a fixed discount, while the PercentCoupon substracts a percentage of the total Price. <br />
At some point, we substract the discount from the Order, maybe in our Order class:</p>

<div class="highlight"><pre><code class="language-php">    <span class="k">namespace</span> <span class="nx">Foo\Bar</span><span class="p">;</span>

    <span class="k">class</span> <span class="nc">Order</span> 
    <span class="p">{</span>
        <span class="c1">//some stuff</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">applyCoupon</span><span class="p">(</span><span class="nv">$coupon</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">coupon</span> <span class="o">=</span> <span class="nv">$coupon</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">totalWithoutDiscount</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">//Some functionality to get the total of all Products in this Order</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">products</span><span class="o">-&gt;</span><span class="na">sum</span><span class="p">(</span><span class="s1">&#39;price&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">total</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">totalWithoutDiscount</span><span class="p">()</span> <span class="o">-</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">discount</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">function</span> <span class="nf">discount</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">coupon</span><span class="p">))</span>
                <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">return</span> <span class="nv">$coupon</span><span class="o">-&gt;</span><span class="na">discount</span><span class="p">(</span><span class="nv">$this</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">//more stuff</span>
    <span class="p">}</span></code></pre></div>

<p>And our Coupon classes could look something like this:</p>

<div class="highlight"><pre><code class="language-php">    <span class="k">namespace</span> <span class="nx">Foo\Bar</span><span class="p">;</span>

    <span class="k">class</span> <span class="nc">PercentCoupon</span> <span class="k">implements</span> <span class="nx">Coupon</span>
    <span class="p">{</span>
        <span class="c1">//some stuff</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">discount</span><span class="p">(</span><span class="nv">$order</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$order</span><span class="o">-&gt;</span><span class="na">totalWithoutDiscount</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">value</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="c1">//more stuff</span>
    <span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-php">    <span class="k">namespace</span> <span class="nx">Foo\Bar</span><span class="p">;</span>

    <span class="k">class</span> <span class="nc">ValueCoupon</span> <span class="k">implements</span> <span class="nx">Coupon</span>
    <span class="p">{</span>
        <span class="c1">//some stuff</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">discount</span><span class="p">(</span><span class="nv">$order</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">value</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">//more stuff</span>
    <span class="p">}</span></code></pre></div>

<div class="highlight"><pre><code class="language-php">    <span class="k">namespace</span> <span class="nx">Foo\Bar</span><span class="p">;</span>

    <span class="k">interface</span> <span class="nx">Coupon</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">function</span> <span class="nf">discount</span><span class="p">(</span><span class="nv">$order</span><span class="p">);</span>
    <span class="p">}</span></code></pre></div>

<p>Let’s take a closer look at the <strong>Order-&gt;discount()</strong> method. <br />
First we’re checking if someone has applied a Coupon, if not we just return 0, since there is no Coupon applied.<br />
But we could remove this little condition, making the Code look even prettier, by saying <em>“Hey, we basically always have a Coupon!”</em>.<br />
This is where the Null Object Pattern comes into play.</p>

<p>We create a NullCoupon which has the same discount Method but simply returns 0, since it’s not “really” a Coupon:</p>

<div class="highlight"><pre><code class="language-php">    <span class="k">namespace</span> <span class="nx">Foo\Bar</span><span class="p">;</span>

    <span class="k">class</span> <span class="nc">NullCoupon</span> <span class="k">implements</span> <span class="nx">Coupon</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">function</span> <span class="nf">discount</span><span class="p">(</span><span class="nv">$order</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></div>

<p>If we have even more Methods using a Coupon, we won’t have to check our Order’s coupon agains null ever again. <br />
Additionally we do not have to fear for any Errors, because we tried accessing a non-present Coupon, again. <br />
Instead we just have a NullCoupon, basically doing <em>nothing</em> to our Order’s total price.</p>

<p>We can now remove the if clause and instantiate a NullCoupon in the constructor:</p>

<div class="highlight"><pre><code class="language-php">    <span class="k">namespace</span> <span class="nx">Foo\Bar</span><span class="p">;</span>

    <span class="k">class</span> <span class="nc">Order</span> 
    <span class="p">{</span>
        <span class="c1">//some stuff</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">coupon</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NullCoupon</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">private</span> <span class="k">function</span> <span class="nf">discount</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$coupon</span><span class="o">-&gt;</span><span class="na">discount</span><span class="p">(</span><span class="nv">$this</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">//more stuff</span>
    <span class="p">}</span></code></pre></div>

<p>And if we would like to implement a method, displaying the Coupon Value nicely to our user, we won’t need to check against null again:</p>

<div class="highlight"><pre><code class="language-php">    <span class="k">namespace</span> <span class="nx">Foo\Bar</span><span class="p">;</span>

    <span class="k">class</span> <span class="nc">Order</span> 
    <span class="p">{</span>
        <span class="c1">//some stuff</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">displayCouponValue</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">coupon</span><span class="o">-&gt;</span><span class="na">displayValue</span><span class="p">();</span> <span class="c1">//no need for a if!</span>
        <span class="p">}</span>

        <span class="c1">//more stuff</span>
    <span class="p">}</span></code></pre></div>

<p>Instead our NullDiscount just returns something like <em>No Coupon applied</em>.</p>

<p>There you go! Nice and clean!</p>


    <aside class="share">

      <span>Share this: </span> 

      <a href="//twitter.com/share?text=Making friends with null: The Null Object Pattern&amp;url=http://blog.remoblaser.ch/prettycoding/2015/the-null-object-pattern/&amp;via=remoblaser"
      onclick="ga('send', 'event', 'button', 'click', 'share');window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <i class="fa fa-twitter"></i>
      </a>

      <a href="//www.facebook.com/sharer/sharer.php?u=http://blog.remoblaser.ch/prettycoding/2015/the-null-object-pattern/"
      onclick="ga('send', 'event', 'button', 'click', 'share');window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <i class="fa fa-facebook"></i>
      </a>

      <a target="_blank" href="//de.pinterest.com/pin/create/button/" data-pin-do="buttonBookmark"  data-pin-color="red" data-pin-height="28">
        <i class="fa fa-pinterest"></i>
      </a>

    </aside>
  </div>

  
  <hr>

  <aside id="comments" class="disqus">

    <div class="container">
      <h3><i class="fa fa-comments-o"></i> Comments</h3>
      <div id="disqus_thread"></div>

      <script type="text/javascript">
         var disqus_shortname = 'remoblaser';
        
        var disqus_config = function () {
            this.page.url = 'http://blog.remoblaser.ch/prettycoding/2015/the-null-object-pattern';
            this.page.identifier = '/prettycoding/2015/the-null-object-pattern' + 'http://blog.remoblaser.ch';
            this.page.title = "Making friends with null: The Null Object Pattern";
            this.callbacks.onNewComment = [function() { 
              ga('send', 'event', 'button', 'click', 'comment');
            }];
        };
        
        (function() { 
            var d = document, s = d.createElement('script');
            
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';  
            
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();

      </script>

      <noscript>
        Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
      </noscript>
    </div>

  </aside>

</article>


<div class="subscribe">
    <span class="close"><i class="fa fa-close"></i></span>
    <p>Like what you're reading? Subscribe now for a weekly list of new Posts directly into your mailbox. No spam, i promise!</p>

    <div id="mc_embed_signup">
        <form action="//remoblaser.us12.list-manage.com/subscribe/post?u=f1a5c7aaa441210086d3e9047&amp;id=d41fbaadee" 
            method="post" 
            id="mc-embedded-subscribe-form" 
            name="mc-embedded-subscribe-form" 
            class="validate" 
            target="_blank" 
            novalidate>
            <div id="mc_embed_signup_scroll">
    
                <div class="mc-field-group">
                    <input required placeholder="E-Mail" type="email" value="" name="EMAIL" class="required email inline" id="mce-EMAIL">
                </div>
                <div style="position: absolute; left: -5000px;" aria-hidden="true">
                    <input type="text" name="b_f1a5c7aaa441210086d3e9047_d41fbaadee" tabindex="-1" value="">
                </div>
                <div class="clear">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button inline" onclick="ga('send', 'event', 'button', 'click', 'add-subscriber-panel');">
                </div>
            </div>
        </form>
    </div> 
</div>

        </section>

        
<div class="clearfix"></div>

<footer class="site-footer txt-center">
  <hr>

  <ul class="social">
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://twitter.com/remoblaser" target="_blank"><i class="fa fa-twitter"></i></a></li>
      
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://github.com/remoblaser" target="_blank"><i class="fa fa-github"></i></a></li>
      
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://plus.google.com/+RemoBlaser" target="_blank"><i class="fa fa-google-plus"></i></a></li>
      
    
      
        <li><a href="" target="_blank"><i class="fa fa-"></i></a></li>
      
        <li><a href="http://xing.com/profile/Remo_Blaser" target="_blank"><i class="fa fa-xing"></i></a></li>
      
    
  </ul>

  <small>&copy; 2016 All rights reserved. Made with <a href="http://jekyllrb.com" target="_blank">Jekyll</a> and <i class="fa fa-heart"></i>
  <br />
  <a href="/subscribe/">Subscribe to the newsletter</a>
  </small>

</footer>


    </main>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/jekyll-search.min.js"></script>
    <script src="/js/cookies.js"></script>
    <script src="/js/main.js"></script>
  </body>
</html>
